📖 ThirdTool 도메인 모델
Deck (덱)

정의
카드를 묶는 단위. 계층 구조를 가질 수 있으며, 특정 학습 알고리즘 타입을 설정할 수 있다.

속성

id: Long

name: String – 사용자 내에서 고유

lastAccessed: LocalDateTime – 마지막 접근 시각

scoringAlgorithmType: String – 사용 알고리즘 타입 (예: SM2, Leitner)

depth: int – 계층 깊이

parentDeck: Deck – 부모 덱 (자기참조)

subDecks: List<Deck> – 하위 덱 목록

cards: List<Card> – 카드 목록

user: UserEntity – 소유자

행위

of() – 덱 생성

updateName() – 덱 이름 변경

updateLastAccessed() – 마지막 접근 시간 갱신

updateParent() – 부모 덱 변경 시 depth 재계산

규칙

동일 사용자 내 덱 이름 중복 불가

부모 덱이 없으면 depth = 0

Card (카드)

정의
학습 질문/답변을 담는 개별 단위. 하나의 학습 상태(LearningProfile)를 반드시 가진다.

속성

id: Long

question: String

answer: String

deck: Deck – 소속 덱

images: List<CardImage> – 연결된 이미지

learningProfile: LearningProfile – 학습 프로필

행위

of() – 카드 생성 (덱의 알고리즘 기반 LearningProfile 자동 초기화)

updateCard() – 질문/답변 수정

registerLearningProfile() – LearningProfile 연결

updateImage() / addImage() – 카드 이미지 관리

currentScore() – 현재 점수 조회

규칙

생성 시 Deck의 알고리즘 타입에 맞는 LearningProfile이 자동 생성

카드마다 하나의 LearningProfile만 가질 수 있음

CardImage (카드 이미지)

정의
카드에 연결되는 이미지. 질문/답변 이미지를 구분하고, 여러 장일 경우 순서를 가진다.

속성

id: Long

card: Card – 소속 카드

imageUrl: String – 이미지 경로 (S3 등)

imageType: Enum – QUESTION / ANSWER 구분

sequence: int – 순서

행위

of() – 이미지 생성

updateImage() – 이미지 변경

LearningProfile (학습 프로필)

정의
카드의 학습 상태를 추적하는 추상 클래스. 학습 알고리즘별 세부 로직은 하위 클래스가 책임진다.

속성

id: Long

card: Card – 연결된 카드

score: int – 현재 점수

greatCount, goodCount, normalCount, badCount – 피드백 카운팅

mode: DeckMode – 학습 모드

행위

applyFeedback() – 피드백 적용 (추상 메서드, 하위 클래스 구현)

incrementFeedback() – 공통 피드백 카운팅

reset() – 점수 초기화

updateMode() – 모드 변경

linkToCard() – 카드 연결

규칙

DeckMode가 THREE_DAY일 때만 피드백 허용

LeitnerLearningProfile (라이트너 학습 프로필)

정의
Leitner 알고리즘 기반 학습 프로필. 반복 횟수와 난이도(Easiness Factor)를 관리한다.

속성

repetition: int – 반복 횟수

easinessFactor: double – 난이도 지수

행위

init() – Leitner 프로필 초기화

applyFeedback() – 피드백 적용 및 점수 갱신

applyScore() – 점수/반복/EF 값 갱신

ScoringAlgorithm (점수 계산 알고리즘)

정의
학습 프로필의 점수를 갱신하는 전략 인터페이스.

행위

updateScore(profile, feedback) – 피드백을 기반으로 점수 갱신

규칙

알고리즘 구현체: SM2, Leitner 등

DeckMode (덱 모드)

정의
덱의 학습 모드를 구분하는 Enum.

상수

THREE_DAY

LONG_TERM

CUSTOM_INTERVAL

FeedbackType (피드백 유형)

정의
카드 학습 시 사용자 피드백 종류.

상수

GREAT, GOOD, NORMAL, BAD

CardRank (카드 랭크)

정의
점수 구간별 카드 난이도 등급.

속성

id: Long

name: String – 등급명 (예: Bronze, Gold)

minScore: int, maxScore: int – 점수 범위

user: UserEntity – 사용자 소유

행위

createRank() – 랭크 생성

updateScoreRange() – 점수 구간 변경

DeckRecommendation (덱 추천)

정의
현재 시점에서 계산된 덱 추천 결과. ORM 엔티티가 아닌, 계산 결과를 담는 VO 성격.

속성

deckId: Long

deckName: String

priorityScore: double – 우선순위 점수

reason: String – 추천 근거

행위

of(deck) – Deck 상태 기반으로 추천 결과 생성

규칙

추천은 요청 시점에 계산 (영속화 X)

avgScore, badRatio, lastAccessed 등을 기반으로 계산

RecommendationService (추천 서비스)

정의
덱 추천 결과를 계산하고 정렬하는 도메인 서비스.

행위

recommendDecks(user) – 사용자의 덱들을 추천 점수 순으로 정렬하여 반환

RecommendationController (추천 컨트롤러)

정의
REST API를 통해 덱 추천을 노출하는 어댑터 계층.

행위

GET /api/recommendations/decks – 로그인한 사용자에게 덱 추천 결과 반환